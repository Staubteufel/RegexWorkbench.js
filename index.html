<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8">
		<meta name="description" content="RegexWorkbench.js is an online open source tool and tester for regular expressions based on javascript. Features are Highlighting, Replace, Ignore Cases, Multiline and a human readable output. [ MIT License ]" />
		<meta name="keywords" content="regular, expression, regex, regexp, online, tool, tester, editor, javascript" />
		<meta name="google-site-verification" content="9iVzvHBCiGVHpC2FN6GiNZyW-Pmn6YaSk_88BTBrIpQ" />
		<title>RegexWorkbench.js</title>
		<link rel="stylesheet" type="text/css" href="css/main.css" />
		<link rel="stylesheet" type="text/css" href="css/regex-colorizer.css" />
		<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
		<script type="text/javascript" src="js/RegexWorkbench.js"></script>
		<script type="text/javascript" src="js/regex-colorizer.js"></script>
		<script type="text/javascript">
			$(function(){
				/// Variables
				var isReplace = false;

				
				/// Auto-Run
				if($("#optionReplace").prop('checked')) 
					isReplace = true;
				chooseFunction();


				
				/// Events
				$("#regexPattern").on('input', function(){
					chooseFunction();
				});
				
				$("#regexPattern").focusout(function(){
					addPaternStyle();
					if($("#regexPattern").html() == "undefined") {
						$("#regexPattern").html("");
					}
				});
				
				$("#regexReplace").on('input', function(){
					chooseFunction();
				});
				
				$("#regexInput").on('input', function(){
					chooseFunction();
				});
				
				$("#optionReplace").on("click", function() {
					if(isReplace){
						isReplace = false;
					}
					else {
						isReplace = true;
					}
					
					chooseFunction();
				});
				
				$("#optionMultiline").on("click", function() {
					chooseFunction();
				});
				
				$("#optionIgnoreCase").on("click", function() {
					chooseFunction();
				});
				


				/// Functions
				function addPaternStyle() {
					RegexColorizer.addStyleSheet();
					RegexColorizer.colorizeAll();
				}
				
				function chooseFunction() {
					// Modifiers
					var modifiers = "g";
					if( $('#optionMultiline').prop('checked') )
						modifiers = modifiers + "m";

					if( $('#optionIgnoreCase').prop('checked') )
						modifiers = modifiers + "i";

					
					// Start function
					if(isReplace) {
						updateReplace(modifiers);
					}
					else {
						updateMatches(modifiers);
					}
				}
				
				function updateReplace(modifiers) {
					var regexPattern = unescape(encodeURIComponent( $("#regexPattern").text() ));
					var regexReplace = unescape(encodeURIComponent( $("#regexReplace").val() ));
					var regexInput = unescape(encodeURIComponent( $("#regexInput").val() ));
					
					var replaceOutput = RWreplace(regexPattern, regexReplace, regexInput, modifiers);
					try {
						$('#regexOutput').val( decodeURIComponent(escape( replaceOutput )) );
					}
					catch (e) {
						// Error 
					}
				}
				
				function updateMatches(modifiers) {
					$("#regexOutput").val("");
					var regexPattern = unescape(encodeURIComponent( $("#regexPattern").text() ));
					var regexInput = unescape(encodeURIComponent( $("#regexInput").val() ));
					
					var matchArray = RWmatch(regexPattern, regexInput, modifiers);


					try {
						var i = 0;
						while( i < matchArray.length){
							if(matchArray[i] != undefined) {
								$('#regexOutput').val( $("#regexOutput").val() + decodeURIComponent(escape( matchArray[i] )) + "\n" );
							}
							i++;
						}
						
						// Numer of matches
						if(matchArray[0] == ""){
							$("#numberOfMatches").html(0);
						}
						else {
							$("#numberOfMatches").html(i);
						}
						
					} catch (e) {
						// regexInput is empty
					}

				}
			});
		</script>
	</head>
	<body>
		<a href="https://github.com/Staubteufel/RegexWorkbench.js"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
		Regular Expression Pattern:<br />
		<div id="regexPattern" class="regex" contenteditable=""></div>
		<br />
		Options:<br />
		<input type="checkbox" id="optionReplace">Replace <input type="checkbox" id="optionMultiline">Multiline <input type="checkbox" id="optionIgnoreCase">Ignore Case
		<br />
		<br />
		Replace String:
		<input type="text" id="regexReplace" />
		<br />
		<br />
		Search String:<br />
		<textarea id="regexInput"></textarea>
		<br />
		<br />
		Output String:<br />
		<textarea id="regexOutput" readonly="readonly"></textarea>
		<br />
		<br />
		Matches: <span id="numberOfMatches">0</span>
	</body>
</html>
